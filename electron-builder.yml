appId: org.whispersystems.signal-desktop
mac:
  artifactName: '${name}-mac-${version}.${ext}'
  category: public.app-category.social-networking
  icon: build/icons/mac/icon.icns
  publish:
    - provider: generic
      url: https://updates.signal.org/desktop
  target:
    - zip
  bundleVersion: '1'
win:
  asarUnpack: node_modules/spellchecker/vendor/hunspell_dictionaries
  artifactName: '${name}-win-${version}.${ext}'
  certificateSubjectName: Signal
  publisherName: Signal (Quiet Riddle Ventures, LLC)
  icon: build/icons/win/icon.ico
  publish:
    - provider: generic
      url: https://updates.signal.org/desktop
  target:
    - nsis
nsis:
  deleteAppDataOnUninstall: true
linux:
  category: Network
  desktop:
    StartupWMClass: Signal
  asarUnpack: node_modules/spellchecker/vendor/hunspell_dictionaries
  target:
    - deb
  icon: build/icons/png
deb:
  depends:
    - gconf2
    - gconf-service
    - libnotify4
    - libappindicator1
    - libxtst6
    - libnss3
    - libasound2
    - libxss1
files:
  - package.json
  - config/default.json
  - config/${env.SIGNAL_ENV}.json
  - config/local-${env.SIGNAL_ENV}.json
  - background.html
  - about.html
  - settings.html
  - permissions_popup.html
  - debug_log.html
  - _locales/**
  - protos/*
  - js/**
  - ts/**/*.js
  - ts/*.js
  - stylesheets/*.css
  - '!js/register.js'
  - '!js/views/standalone_registration_view.js'
  - app/*
  - preload.js
  - about_preload.js
  - settings_preload.js
  - permissions_popup_preload.js
  - debug_log_preload.js
  - main.js
  - images/**
  - fonts/*
  - build/assets
  - node_modules/**
  - '!node_modules/emoji-panel/dist/*'
  - '!node_modules/emoji-panel/lib/emoji-panel-emojione-*.css'
  - '!node_modules/emoji-panel/lib/emoji-panel-google-*.css'
  - '!node_modules/emoji-panel/lib/emoji-panel-twitter-*.css'
  - '!node_modules/emoji-panel/lib/emoji-panel-apple-{16,20,64}.css'
  - '!node_modules/emoji-datasource/emoji_pretty.json'
  - '!node_modules/emoji-datasource/*.png'
  - '!node_modules/emoji-datasource-apple/emoji_pretty.json'
  - '!node_modules/emoji-datasource-apple/img/apple/{sheets-128,sheets-256}/*.png'
  - '!node_modules/emoji-datasource-apple/img/apple/sheets/{16,20,32}.png'
  - '!node_modules/spellchecker/vendor/hunspell/**/*'
  - '!**/node_modules/*/{CHANGELOG.md,README.md,README,readme.md,readme,test,__tests__,tests,powered-test,example,examples,*.d.ts}'
  - '!**/node_modules/.bin'
  - '!**/node_modules/*/build/**'
  - '!**/*.{o,hprof,orig,pyc,pyo,rbc}'
  - '!**/._*'
  - '!**/{.DS_Store,.git,.hg,.svn,CVS,RCS,SCCS,__pycache__,thumbs.db,.gitignore,.gitattributes,.editorconfig,.flowconfig,.yarn-metadata.json,.idea,appveyor.yml,.travis.yml,circle.yml,npm-debug.log,.nyc_output,yarn.lock,.yarn-integrity}'
  - node_modules/spellchecker/build/Release/*.node
  - node_modules/websocket/build/Release/*.node
  - '!node_modules/@journeyapps/sqlcipher/deps/*'
